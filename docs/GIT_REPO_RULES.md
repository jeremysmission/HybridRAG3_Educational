# HybridRAG3 -- Git & Repository Rules
# ============================================================================
# Reference document -- print this, bookmark it, keep it on your phone.
# Established across sessions Feb 8-14, 2026.
# Updated: Feb 15, 2026 (Claude/AI references, virtual test framework)
# ============================================================================


## Three-Repo Structure

| # | Repo Name              | Visibility  | Purpose                                      |
|---|------------------------|-------------|----------------------------------------------|
| 1 | LimitlessApp           | PRIVATE     | Home-only personal productivity tool          |
| 2 | HybridRAG3             | PRIVATE     | Real dev workspace, experiments, cheat sheets |
| 3 | HybridRAG3_Educational | PUBLIC      | Sanitized snapshots for work laptop download  |

- Repo 1 never touches work. Home PC only.
- Repo 2 is where you actually develop. Accessible on phone via GitHub app.
- Repo 3 gets sanitized one-way pushes from Repo 2 when you need a work transfer.


## Transfer Rules

### Home Machine (your PC)
- git commit and git push ONLY from here
- Never git from work terminal (too trackable)
- Credential helper: Windows Credential Manager (git config --global credential.helper manager)
- Cleanup scripts NEVER purge credential entries, .git/ directories, or .gitconfig

### Work Machine (corporate laptop)
- Download zip from HybridRAG3_Educational via browser ONLY
- No git clone, no git pull, no credentials, no traces
- Extract zip, copy into project folder
- If scripts need to move: zip them first (raw .py/.ps1 downloads get flagged by security)
- Use GitHub Releases page for versioned transfer kits

### Phone (GitHub mobile app)
- Access private HybridRAG3 repo for cheat sheets, docs, architecture notes
- Markdown renders beautifully in GitHub mobile
- Can review code, read docs while waiting in line, on the road, etc.


## What Goes in Each Repo

### HybridRAG3 (Private -- your real workspace)
INCLUDES:
- All source code (src/, scripts/, tests/, diagnostics/)
- Config files (config/default_config.yaml, config/profiles.yaml)
- Documentation (docs/, README.md, SETUP.md, ARCHITECTURE.md)
- Requirements files (requirements.txt, requirements-lock.txt)
- Personal tutorials and cheat sheets (docs/ folder)
- Evaluation framework (eval/)
- Tools and utilities (tools/)
- Virtual test framework (tests/virtual_test_framework.py, TEMPLATE.py)
- Virtual test results (tests/virtual_test_*.py)
- Virtual testing methodology (docs/VIRTUAL_TESTING.md)

EXCLUDES (via .gitignore):
- .venv/ (virtual environment -- rebuilt per machine)
- .model_cache/, .hf_cache/, .torch_cache/ (downloaded locally)
- data/ folder (runtime data, never in git)
- *.sqlite3 (database files)
- embeddings.f16.dat, embeddings_meta.json (memmap files)
- logs/ (generated at runtime)
- API keys (stored in Windows Credential Manager, not files)
- Session transcripts (claude_sessions/)
- Primers (primers/)
- Handover docs (handover/)
- Chat history (chat_history/)
- WAL dumps
- __pycache__/

### HybridRAG3_Educational (Public -- sanitized for work)
INCLUDES:
- Same source code as private repo (sanitized)
- Sanitized README: "Educational reference implementation of RAG patterns"
- Generic config templates with no hardcoded paths
- Setup instructions that work on any machine
- License table showing all packages are open-source (Apache 2.0, MIT, BSD)
- Standard test suites (test_redesign.py, test_hybridrag3.py, test_audit.py)

NEVER INCLUDES:
- Any mention of: enterprise, organization, corporate, restricted, ORG, company names
- Any mention of: Claude, Anthropic, claude.ai (reveals AI-assisted development)
- Virtual test framework (tests/virtual_test_*.py, docs/VIRTUAL_TESTING.md)
- Personal paths ({SOURCE_DIR}, {DATA_DIR})
- API keys or credentials
- Session transcripts, primers, handover docs, or chat history
- Work-specific configuration
- security standard/industry/milregulatoryy standard references
- Spawn engineering docs


## What Syncs Between Machines (via git)

SAME ON ALL MACHINES:
- All Python source code (src/, scripts/, tests/)
- Config templates (config/default_config.yaml)
- Documentation (docs/, README.md)
- Requirements files
- Evaluation framework
- Diagnostic suite

MACHINE-SPECIFIC (do NOT overwrite):
- start_hybridrag.ps1 (different paths per machine)
- .venv/ (different Python builds possible)
- .model_cache/ (downloaded locally on each machine)
- API keys (Windows Credential Manager, local to each login)
- config/system_profile.json (generated by diagnostic)
- Any data or index files


## Sanitization Rules for Public Repo

BANNED WORDS (never appear in HybridRAG3_Educational):

### enterprise/Corporate
- enterprise, organization, restricted, restricted, corporate
- Any company names or acronyms (ORG, Organization, Organization)
- Any project codenames
- Any employee names (the developer, {USERNAME})
- Any internal URLs or endpoints
- security standard, industry, framework, regulatory, sensitive data, compliance framework, authorization

### AI Assistant References
- Claude (the AI assistant)
- Anthropic
- claude.ai
- virtual_test (Claude-specific test methodology)
- Any reference to AI-assisted development methodology

REPLACEMENT PATTERNS:
- "enterprise environment" -> "enterprise environment"
- "restricted network" -> "offline network"
- "corporate proxy" -> "enterprise proxy"
- "Claude" -> "AI assistant"
- "Anthropic" -> "AI provider"
- "Anthropic Claude" -> "cloud LLM provider"
- Company-specific paths -> generic placeholders like {DATA_DIR}

README FRAMING:
- "Educational reference implementation of Retrieval-Augmented Generation
   patterns for studying AI engineering concepts."
- License: "Research and educational use"
- All packages sourced from PyPI with permissive open-source licenses

FILES BLOCKED FROM EDUCATIONAL (by sync_to_educational.py):
- virtual_test_framework.py, virtual_test_TEMPLATE.py, virtual_test_*.py
- VIRTUAL_TESTING.md
- TIERED_MEMORY_DESIGN.md (7 Claude references)
- SECURITY_AUDIT_ROADMAP.txt
- spawn_eng/ folder
- sync_to_educational.py (meta -- don't copy the sanitizer itself)
- All handover/primer/session files


## Daily Git Workflow (Home Machine)

### End of Session Commit
```
cd {PROJECT_ROOT}
git add -A
git status
git commit -m "descriptive message about what changed"
git push origin main
```

### Before Committing -- Safety Checks
```
# Make sure no sensitive files slipped through
git status
git diff --cached --name-only

# Check for accidental sensitive content
Select-String -Path (git diff --cached --name-only) -Pattern "enterprise|organization|restricted|ORG|Claude|Anthropic" -SimpleMatch
```

### Work Transfer (when needed)
1. Ensure private repo is committed and clean
2. Run sync_to_educational.py (performs sanitization + banned-word scan)
3. Review the [WARN] output for any leaked terms
4. Fix any warnings before committing
5. Commit and push to public repo
6. At work: browser -> GitHub -> Code -> Download ZIP
7. Extract, copy into work project folder


## Credential Safety

### Git Credential Helper
```
git config --global credential.helper manager
```
Stores GitHub token in Windows Credential Manager (encrypted, persistent).

### Verify Credentials Stored
```
cmdkey /list | findstr "git"
```
Should show git:https://github.com with your username.

### Safety Rules
- Cleanup scripts NEVER purge Windows Credential Manager entries
- Cleanup scripts NEVER touch .git/ directories
- Cleanup scripts NEVER touch .gitconfig
- No file matching *token* or *credential* is ever auto-deleted

### Work Machine -- Zero Footprint
- Never run git clone or git pull on work terminal
- Never enter GitHub credentials on work machine
- Browser-only zip downloads leave minimal traces
- If IT asks: "I downloaded an educational AI project to study"


## PowerShell Script Transfer to Work

Raw .py and .ps1 file downloads get flagged by corporate security.
Always zip scripts before transferring:

1. At home: package files into releases/ folder as .zip
2. Push to HybridRAG3_Educational
3. At work: download the .zip from GitHub Releases page
4. Extract on work machine

.gitignore has exception for releases/ zips:
  !releases/*.zip

Use git add -f for releases/ zips if needed.


## Future Automation (not yet built)

Remote Ollama access from phone (Week 3-4):
- Tailscale or WireGuard VPN tunnel to home PC
- Query RAG system from anywhere
- Zero public internet exposure
